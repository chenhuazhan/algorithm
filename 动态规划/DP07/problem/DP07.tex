\documentclass[10pt,a4paper,english]{article}
\usepackage{CJK}
\usepackage{indentfirst}
\usepackage{babel}
\usepackage{ae}
\usepackage{aeguill}
\usepackage{shortvrb}
\usepackage{tabularx}
\usepackage{longtable}
\setlength{\extrarowheight}{2pt}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{color}
\usepackage{multirow}
\usepackage{ifthen}
\usepackage[CJKbookmarks=true,colorlinks=true,linkcolor=blue,urlcolor=blue]{hyperref}
\usepackage[DIV12]{typearea}
% generated by Docutils <http://docutils.sourceforge.net/>
\newlength{\admonitionwidth}
\setlength{\admonitionwidth}{0.9\textwidth}
\newlength{\docinfowidth}
\setlength{\docinfowidth}{0.9\textwidth}
\newlength{\locallinewidth}
\newlength{\lineblockindentation}
\setlength{\lineblockindentation}{3em}
\newenvironment{lineblock}[1]
{\begin{list}{}
  {\setlength{\partopsep}{\parskip}
   \addtolength{\partopsep}{\baselineskip}
   \topsep0pt\itemsep0.15\baselineskip\parsep0pt
   \leftmargin#1}
 \raggedright}
{\end{list}}
% begin: floats for footnotes tweaking.
\setlength{\floatsep}{0.5em}
\setlength{\textfloatsep}{\fill}
\addtolength{\textfloatsep}{3em}
\renewcommand{\textfraction}{0.5}
\renewcommand{\topfraction}{0.5}
\renewcommand{\bottomfraction}{0.5}
\setcounter{totalnumber}{50}
\setcounter{topnumber}{50}
\setcounter{bottomnumber}{50}
% end floats for footnotes
% some commands, that could be overwritten in the style file.
\newcommand{\rubric}[1]{\subsection*{~\hfill {\it #1} \hfill ~}}
\newcommand{\titlereference}[1]{\textsl{#1}}
% end of "some commands"
\begin{document}
\begin{CJK*}{GBK}{song}
\title{dd{\_}engi的动态规划专项练习赛
}
\author{Tianyi Cui}
\date{2007年11月9日}
\raggedbottom
\maketitle
%___________________________________________________________________________
\begin{center}
\begin{tabularx}{\docinfowidth}{rX}
\textbf{命题}: &
	Tianyi Cui (dd{\_}engi) \\
\textbf{审题}: &
	Moony Chou (zmy) \\
\textbf{比赛日期}: &
	2007年11月9日 星期五 \\
\textbf{比赛时间}: &
	18:30 -{}- 21:40 \\
\textbf{提交邮箱}: &
	\href{mailto:dp07submit@gmail.com}{dp07submit@gmail.com}

\href{mailto:xxjs2000@163.com}{xxjs2000@163.com} \\
\textbf{比赛支持}: &
	\href{https://groups.google.com/group/infowire/browse_thread/thread/1fa0cc1cb5e21175}{INFOWIRE}

\href{http://oibh.org/bbs/thread-17787-1-1.html}{OIBH BBS} \\
\end{tabularx}
\end{center}

\setlength{\locallinewidth}{\linewidth}








%___________________________________________________________________________

\hypertarget{id2}{}
\pdfbookmark[0]{题目说明}{id2}
\section*{题目说明}
\label{id2}

\leavevmode
\begin{longtable}[c]{|p{0.193\locallinewidth}|p{0.183\locallinewidth}|p{0.193\locallinewidth}|p{0.193\locallinewidth}|p{0.193\locallinewidth}|}
\hline

题目名称
 & 
质数取石子
 & 
多人背包
 & 
不听话的机器人
 & 
新魔法药水
 \\
\hline

源文件名
 & 
game.c/cpp/pas
 & 
bags.c/cpp/pas
 & 
robot.c/cpp/pas
 & 
magic.c/cpp/pas
 \\
\hline

输入文件名
 & 
game.in
 & 
bags.in
 & 
robot.in
 & 
magic.in
 \\
\hline

输出文件名
 & 
game.out
 & 
bags.out
 & 
robot.out
 & 
magic.out
 \\
\hline

每个测试点的时限
 & 
2s
 & 
2s
 & 
2s
 & 
2s
 \\
\hline

内存限制
 & 
64M
 & 
64M
 & 
64M
 & 
64M
 \\
\hline
\end{longtable}


%___________________________________________________________________________

\hypertarget{id3}{}
\pdfbookmark[0]{质数取石子}{id3}
\section*{质数取石子}
\label{id3}


%___________________________________________________________________________

\hypertarget{id4}{}
\pdfbookmark[1]{题目描述}{id4}
\subsection*{题目描述}
\label{id4}

DD 和 MM 正在玩取石子游戏。他们的游戏规则是这样的：桌上有若干石子，DD 先取，轮流取，每次必须取质数个。如果某一时刻某一方无法从桌上的石子中取质数个，比如说剩下 0 个或 1 个石子，那么他/她就输了。

DD 和 MM 都很聪明，不管哪方存在一个可以必胜的最优策略，他/她都会按照最优策略保证胜利。于是，DD 想知道，对于给定的桌面上的石子数，他究竟能不能取得胜利呢？

当 DD 确定会取得胜利时，他会说：``不管 MM 选择怎样的取石子策略，我都能保证至多 X 步以后就能取得胜利。''那么，最小的满足要求的 X 是多少呢？注意，不管是 DD 取一次石子还是 MM 取一次石子都应该被计算为``一步''。


%___________________________________________________________________________

\hypertarget{id5}{}
\pdfbookmark[1]{输入格式}{id5}
\subsection*{输入格式}
\label{id5}

第一行有一个整数 N，表示这个输入文件中包含 N 个测试数据。

第二行开始，每行有一个测试数据，其中仅包含一个整数，表示桌面上的石子数。


%___________________________________________________________________________

\hypertarget{id6}{}
\pdfbookmark[1]{输出格式}{id6}
\subsection*{输出格式}
\label{id6}

你需要对于每个输入文件中的 N 个测试数据输出相应的 N 行。

如果对于该种情形是 DD 一定取得胜利，那么输出最小的 X。否则该行输出 -1。


%___________________________________________________________________________

\hypertarget{id7}{}
\pdfbookmark[1]{样例输入}{id7}
\subsection*{样例输入}
\label{id7}
\begin{quote}{\ttfamily \raggedright \noindent
3~\\
8~\\
9~\\
16
}\end{quote}


%___________________________________________________________________________

\hypertarget{id8}{}
\pdfbookmark[1]{样例输出}{id8}
\subsection*{样例输出}
\label{id8}
\begin{quote}{\ttfamily \raggedright \noindent
1~\\
-1~\\
3
}\end{quote}


%___________________________________________________________________________

\hypertarget{id9}{}
\pdfbookmark[1]{样例说明}{id9}
\subsection*{样例说明}
\label{id9}

当桌上有 8 个石子时，先取的 DD 只需要取走 7 个石子剩下 1 个就可以在一步之后保证胜利，输出 1。

当桌上有 9 个石子时。若 DD 取走 2 个，MM 会取走 7 个，剩下 0 个，DD 输。若 DD 取走 3 个，MM 会取走 5 个，剩下 1 个，DD 输。DD 取走 5 个或者 7 个的情况同理可知。所以当桌上有 9 个石子时，不管 DD 怎么取，MM 都可以让 DD 输，输出 -1。

当桌上有 16 个石子时，DD 可以保证在 3 步以内取得胜利。可以证明，为了在 3 步内取得胜利，DD 第一步必须取 7 个石子。剩下 9 个石子之后，不管第二步 MM 怎么取，DD 取了第三步以后可以保证胜利，所以输出 3。


%___________________________________________________________________________

\hypertarget{id10}{}
\pdfbookmark[1]{数据范围}{id10}
\subsection*{数据范围}
\label{id10}

输入文件中的数据数 N{\textless}=10。

每次桌上初始的石子数都不超过 20000。


%___________________________________________________________________________

\hypertarget{id11}{}
\pdfbookmark[0]{多人背包}{id11}
\section*{多人背包}
\label{id11}


%___________________________________________________________________________

\hypertarget{id12}{}
\pdfbookmark[1]{题目描述}{id12}
\subsection*{题目描述}
\label{id12}

DD 和好朋友们要去爬山啦！他们一共有 K 个人，每个人都会背一个包。这些包的容量是相同的，都是 V。可以装进背包里的一共有 N 种物品，每种物品都有给定的体积和价值。

在 DD 看来，合理的背包安排方案是这样的：
\newcounter{listcnt0}
\begin{list}{(\arabic{listcnt0})}
{
\usecounter{listcnt0}
\setlength{\rightmargin}{\leftmargin}
}
\item {} 
每个人背包里装的物品的总体积恰等于包的容量。

\item {} 
每个包里的每种物品最多只有一件，但两个不同的包中可以存在相同的物品。

\item {} 
任意两个人，他们包里的物品清单不能完全相同。

\end{list}

在满足以上要求的前提下，所有包里的所有物品的总价值最大是多少呢？


%___________________________________________________________________________

\hypertarget{id13}{}
\pdfbookmark[1]{输入格式}{id13}
\subsection*{输入格式}
\label{id13}

第一行有三个整数：K、V、N。

第二行开始的 N 行，每行有两个整数，分别代表这件物品的体积和价值。


%___________________________________________________________________________

\hypertarget{id14}{}
\pdfbookmark[1]{输出格式}{id14}
\subsection*{输出格式}
\label{id14}

只需输出一个整数，即在满足以上要求的前提下所有物品的总价值的最大值。


%___________________________________________________________________________

\hypertarget{id15}{}
\pdfbookmark[1]{样例输入}{id15}
\subsection*{样例输入}
\label{id15}
\begin{quote}{\ttfamily \raggedright \noindent
2~10~5~\\
3~12~\\
7~20~\\
2~4~\\
5~6~\\
1~1
}\end{quote}


%___________________________________________________________________________

\hypertarget{id16}{}
\pdfbookmark[1]{样例输出}{id16}
\subsection*{样例输出}
\label{id16}
\begin{quote}{\ttfamily \raggedright \noindent
57
}\end{quote}


%___________________________________________________________________________

\hypertarget{id17}{}
\pdfbookmark[1]{样例说明}{id17}
\subsection*{样例说明}
\label{id17}

一种可以得到最优解的方案是：第一个人背体积为 7、2、1 的三种物品，价值为 25。第二个人背体积为 3、7 的两种物品，价值为 32。总价值 57。


%___________________________________________________________________________

\hypertarget{id18}{}
\pdfbookmark[1]{数据范围}{id18}
\subsection*{数据范围}
\label{id18}

总人数 K{\textless}=50。

每个背包的容量 V{\textless}=5000。

物品种类数 N{\textless}=200。

其它正整数都不超过 5000。

输入数据保证存在满足要求的方案。


%___________________________________________________________________________

\hypertarget{id19}{}
\pdfbookmark[0]{不听话的机器人}{id19}
\section*{不听话的机器人}
\label{id19}


%___________________________________________________________________________

\hypertarget{id20}{}
\pdfbookmark[1]{题目描述}{id20}
\subsection*{题目描述}
\label{id20}

DD 有一个不太听话的机器人，这个机器人总是会有自己的想法，而不会完全遵守 DD 给它的指令。

现在 DD 在试图命令机器人走迷宫。迷宫是一个 N*N 个格子组成的区域，格子自左上角到右下角从 (1,1) 到 (N,N) 编号。第 i 行、第 j 列的格子编号为 (i,j)。迷宫中的某些区域是障碍物，机器人不能移动到那里。

DD 给了机器人 M 条指令，指令的类型包括``前进一步''``后退一步''``左转九十度''``右转九十度''。但问题是机器人并不能完全遵守这些指令，因为如果机器人完全遵守这些指令，它可能会走到障碍物的格子里或者走到迷宫外面去，那样就会有危险。机器人希望从这个指令序列里面去掉一些，然后执行剩下的指令时，可以保证整个过程中都不会有危险。

机器人虽然不太听话，但它并不想惹恼了 DD，否则 DD 可能会把它拆掉的。所以机器人希望去掉的指令尽量少。

那么，机器人最少需要去掉多少条指令才能保证不会有危险呢？


%___________________________________________________________________________

\hypertarget{id21}{}
\pdfbookmark[1]{输入格式}{id21}
\subsection*{输入格式}
\label{id21}

第一行有四个整数 N、M、X0、Y0。表示迷宫的大小是 N*N，指令共有 M 条，机器人初始时的位置是 (X0,Y0)。机器人初始时面朝的方向是上方。也就是说，若机器人按照初始时的方向走，效果是所在的 X 坐标越来越小。

下面有 N 行，每行有 N 个字符，可能是点号 '.' 或星号 '*'。'.' 表示空地，'*' 表示障碍。初始位置肯定是一个空地。

下面的 M 行，每行有一个字符串，表示指令。字符串可能是：FORWARD（前进一步）、BACK（后退一步）、LEFT（左转）、RIGHT（右转）。


%___________________________________________________________________________

\hypertarget{id22}{}
\pdfbookmark[1]{输出格式}{id22}
\subsection*{输出格式}
\label{id22}

只需要输出一个整数，表示机器人最少需要去掉多少条指令才能保证不出危险。


%___________________________________________________________________________

\hypertarget{id23}{}
\pdfbookmark[1]{样例输入}{id23}
\subsection*{样例输入}
\label{id23}
\begin{quote}{\ttfamily \raggedright \noindent
4~7~3~3~\\
.***~\\
..**~\\
*..*~\\
****~\\
LEFT~\\
FORWARD~\\
LEFT~\\
BACK~\\
FORWARD~\\
RIGHT~\\
FORWARD
}\end{quote}


%___________________________________________________________________________

\hypertarget{id24}{}
\pdfbookmark[1]{样例输出}{id24}
\subsection*{样例输出}
\label{id24}
\begin{quote}{\ttfamily \raggedright \noindent
1
}\end{quote}


%___________________________________________________________________________

\hypertarget{id25}{}
\pdfbookmark[1]{样例说明}{id25}
\subsection*{样例说明}
\label{id25}

去掉第 3 条、第 5 条或者第 7 条指令都可以保证机器人无危险。


%___________________________________________________________________________

\hypertarget{id26}{}
\pdfbookmark[1]{数据范围}{id26}
\subsection*{数据范围}
\label{id26}

迷宫的边长 N{\textless}=100。

指令数 M{\textless}=1000。


%___________________________________________________________________________

\hypertarget{id27}{}
\pdfbookmark[0]{新魔法药水}{id27}
\section*{新魔法药水}
\label{id27}


%___________________________________________________________________________

\hypertarget{id28}{}
\pdfbookmark[1]{题目描述}{id28}
\subsection*{题目描述}
\label{id28}

魔法师 DD 想给 MM 送一份生日礼物，可是他没有足够的金币。魔法娴熟的 DD 自然想到了利用自己高明的魔药配制技巧来多赚一些金币。

DD 一共知道 N 种魔药（以 1..N 编号），还掌握 M 种配制魔药的方法（以 1..M 编号）。他掌握的每种配制魔药的方法都可以简单表述如下：将若干种魔药各一瓶倒入坩埚内，用魔杖搅拌的同时施出一个特定的魔法，再经过适当浓缩，就可以得到一瓶新的魔药。

森林里有一家魔法商店，这里不仅出售各种魔药，同时也以比售价略低的价格收购各种魔药。DD 的如意算盘就是：首先用自己攒下的 V 个金币去魔法商店购买一些魔药作为原料，再用一天的时间在家努力地配制，最后把配制好的成品再卖给魔法商店。

然而，由于魔法修为的原因，DD 在一天之内最多只能施出 K 次魔法。

DD 想让你帮他算一算，他最多能够在这一天时间内赚到多少金币呢？


%___________________________________________________________________________

\hypertarget{id29}{}
\pdfbookmark[1]{输入格式}{id29}
\subsection*{输入格式}
\label{id29}

第一行有四个整数：N、M、V、K。

第二行开始的 N 行，每行有两个整数，第 i+1 行的两个整数分别表示第 i 种魔药的销售价和收购价。

第 N+2 行开始的 M 行，每行有若干个整数，表示 DD 知道的一种魔药配制方法。每行的格式都是这样的：第一个整数表示这种魔药配制方法可以得到的一瓶魔药成品的编号。下一个整数 n（n{\textless}N），表示这种配制方法需要 n 瓶原料。下面 n 个整数，表示这 n 瓶原料的编号。


%___________________________________________________________________________

\hypertarget{id30}{}
\pdfbookmark[1]{输出格式}{id30}
\subsection*{输出格式}
\label{id30}

只需输出一个整数，表示最多可以赚到金币的数量。


%___________________________________________________________________________

\hypertarget{id31}{}
\pdfbookmark[1]{样例输入}{id31}
\subsection*{样例输入}
\label{id31}
\begin{quote}{\ttfamily \raggedright \noindent
4~2~6~3~\\
1~0~\\
1~0~\\
5~3~\\
20~15~\\
3~2~1~2~\\
4~3~1~2~3
}\end{quote}


%___________________________________________________________________________

\hypertarget{id32}{}
\pdfbookmark[1]{样例输出}{id32}
\subsection*{样例输出}
\label{id32}
\begin{quote}{\ttfamily \raggedright \noindent
12
}\end{quote}


%___________________________________________________________________________

\hypertarget{id33}{}
\pdfbookmark[1]{样例说明}{id33}
\subsection*{样例说明}
\label{id33}

一种最优方案是：买进 1 号和 2 号药水各三瓶，花费 6 金币。使用 1 号魔法 2 次，2 号魔法 1 次。最后得到一瓶 3 号药水，一瓶 4 号药水，卖得 18 金币。赚了 12 金币。


%___________________________________________________________________________

\hypertarget{id34}{}
\pdfbookmark[1]{数据范围}{id34}
\subsection*{数据范围}
\label{id34}

药水种类 N{\textless}=60。

配制方法数 M{\textless}=240。

初始的金币数 V{\textless}=1000。

每天可施的魔法数 K{\textless}=30。
\begin{center}\begin{sffamily}
\fbox{\parbox{\admonitionwidth}{
\textbf{\large Important}
\vspace{2mm}

你作为email附件发送的压缩包，应该包括且仅包括你要提交的所有源文件（.c/.cpp/.pas），没有任何文件夹，更不要打包任何可执行文件。压缩包的文件名即你想采用的参赛名。
}}
\end{sffamily}
\end{center}

\small

Copyright (c)  2007  Tianyi Cui

Permission is granted to copy, distribute and/or modify this document under the terms of \href{http://www.gnu.org/licenses/fdl.txt}{the GNU Free Documentation License}, Version 1.2 or any later version published by the Free Software Foundation.


\end{CJK*}
\end{document}
